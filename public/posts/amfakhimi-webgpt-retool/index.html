<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Learning When to Plan and When to Use Tools: WebGPT vs ReTool | üß† RL Journal Club</title>
<meta name="keywords" content="Reinforcement Learning, LLM, Tool Use, WebGPT, ReTool, RLHF, Preference Model, Outcome Reward, Code Execution, Browsing, ELI5, AIME, Open-Domain QA, Math">
<meta name="description" content="A comparative study of two RL approaches that teach language models when and how to use tools. WebGPT uses browsing with a preference reward model. ReTool uses interleaved code execution with outcome rewards.">
<meta name="author" content="Amir Mohammad Fakhimi">
<link rel="canonical" href="http://localhost:1313/posts/amfakhimi-webgpt-retool/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css" integrity="sha256-IhHKMWS&#43;eDACT2qtKzouUghDpk&#43;PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/amfakhimi-webgpt-retool/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>
    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="üß† RL Journal Club (Alt + H)">üß† RL Journal Club</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="üóÉÔ∏è Archive">
                    <span>üóÉÔ∏è Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="üîç Search">
                    <span>üîç Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="üè∑Ô∏è Tags">
                    <span>üè∑Ô∏è Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/us/" title="üë§ Us">
                    <span>üë§ Us</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Learning When to Plan and When to Use Tools: WebGPT vs ReTool
    </h1>
    <div class="post-description">
      A comparative study of two RL approaches that teach language models when and how to use tools. WebGPT uses browsing with a preference reward model. ReTool uses interleaved code execution with outcome rewards.
    </div>
    <div class="post-meta"><span title='2025-09-11 00:00:00 +0000 UTC'>September 11, 2025</span>&nbsp;¬∑&nbsp;Amir Mohammad Fakhimi

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#motivation" aria-label="Motivation">Motivation</a></li>
                <li>
                    <a href="#webgpt-in-one-page" aria-label="WebGPT in one page">WebGPT in one page</a></li>
                <li>
                    <a href="#retool-in-one-page" aria-label="ReTool in one page">ReTool in one page</a></li>
                <li>
                    <a href="#broad-comparisons" aria-label="Broad comparisons">Broad comparisons</a></li>
                <li>
                    <a href="#why-the-signals-matter" aria-label="Why the signals matter">Why the signals matter</a></li>
                <li>
                    <a href="#failure-cases-to-watch" aria-label="Failure cases to watch">Failure cases to watch</a></li>
                <li>
                    <a href="#acknowledgment" aria-label="Acknowledgment">Acknowledgment</a></li>
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><blockquote>
<p>TL;DR<br>
LLMs can reason in plain text or call external tools. WebGPT uses human preference feedback with browsing and
citations. ReTool uses outcome rewards with interleaved code execution. Preference signals help with factual
presentation and style. Outcome rewards teach strategic tool use and step-wise correction.</p></blockquote>
<h2 id="motivation">Motivation<a hidden class="anchor" aria-hidden="true" href="#motivation">#</a></h2>
<p>Language models often face a choice. Continue reasoning in natural language, or call an external tool such as web search
or a code interpreter. In this post I compare two RL approaches that try to learn that choice: <strong>WebGPT</strong> and <strong>ReTool</strong>.</p>
<h2 id="webgpt-in-one-page">WebGPT in one page<a hidden class="anchor" aria-hidden="true" href="#webgpt-in-one-page">#</a></h2>
<p><strong>What it does.</strong> Answers long-form questions in a text-based browser with required citations. Trains a <strong>reward model</strong>
from human preference pairs, then fine-tunes the policy with PPO. At inference it generates multiple answers and keeps
the one that scores highest under the reward model using rejection sampling.</p>
<p><strong>Reported outcome on ELI5.</strong> Human judges preferred WebGPT over <strong>human demonstrators</strong> 56% of the time and over <strong>top
Reddit answers</strong> 69% of the time. These are pairwise preference judgments, not strict accuracy.</p>
<p><img alt="WebGPT pipeline (schematic). Not to scale." loading="lazy" src="/posts/amfakhimi-webgpt-retool/figs/webgpt_pipeline.svg"></p>
<p><img alt="WebGPT: ELI5 human preference (reported)." loading="lazy" src="/posts/amfakhimi-webgpt-retool/figs/webgpt_results_bar.svg"></p>
<h2 id="retool-in-one-page">ReTool in one page<a hidden class="anchor" aria-hidden="true" href="#retool-in-one-page">#</a></h2>
<p><strong>What it does.</strong> Interleaves language reasoning with <strong>real-time code execution</strong>. Uses <strong>outcome-driven RL</strong> so the
policy learns <strong>when and how</strong> to call tools. Code outputs feed back into reasoning, which supports self-correction.</p>
<p><strong>Reported outcome on AIME.</strong> About <strong>40%</strong> for a text-only baseline. <strong>67%</strong> after about <strong>400</strong> RL steps. <strong>72.5%</strong> in
an extended setting.</p>
<p><img alt="ReTool pipeline (schematic). Not to scale." loading="lazy" src="/posts/amfakhimi-webgpt-retool/figs/retool_pipeline.svg"></p>
<p><img alt="ReTool: AIME accuracy (reported)." loading="lazy" src="/posts/amfakhimi-webgpt-retool/figs/retool_results_bar.svg"></p>
<h2 id="broad-comparisons">Broad comparisons<a hidden class="anchor" aria-hidden="true" href="#broad-comparisons">#</a></h2>
<table>
  <thead>
      <tr>
          <th>Aspect</th>
          <th>WebGPT</th>
          <th>ReTool</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Primary training signal</td>
          <td>Human preference reward model</td>
          <td>Task outcome reward with RL</td>
      </tr>
      <tr>
          <td>Tool modality</td>
          <td>Web browsing with citations</td>
          <td>Code execution</td>
      </tr>
      <tr>
          <td>When to use a tool</td>
          <td>Implicit via answer selection</td>
          <td>Explicit gating learned by the policy</td>
      </tr>
      <tr>
          <td>Credit assignment</td>
          <td>Answer-level, post hoc</td>
          <td>Step-level, interleaved</td>
      </tr>
      <tr>
          <td>Typical wins</td>
          <td>Open-domain factual QA</td>
          <td>Math and algorithmic tasks, parsing</td>
      </tr>
      <tr>
          <td>Common failures</td>
          <td>Citation gaming and shallow browsing</td>
          <td>Tool overuse and runtime errors</td>
      </tr>
      <tr>
          <td>Cost and latency</td>
          <td>Network latency and longer traces</td>
          <td>Extra compute for code, often slower than CoT</td>
      </tr>
      <tr>
          <td>Evaluation exemplars</td>
          <td>ELI5 with human preference</td>
          <td>AIME or GSM-style with exact accuracy</td>
      </tr>
  </tbody>
</table>
<p>This table condenses the poster comparison section. Choose the signal and the tool by task structure. Use browsing for
broad factual grounding with citations. Use code when exact computation and step-wise checking matter.</p>
<h2 id="why-the-signals-matter">Why the signals matter<a hidden class="anchor" aria-hidden="true" href="#why-the-signals-matter">#</a></h2>
<ul>
<li><strong>Preference rewards</strong> align style, clarity, and support from sources. They can nudge the model toward answers that
readers like. They do not directly credit intermediate steps, so they can miss fine-grained improvements during
reasoning.</li>
<li><strong>Outcome rewards</strong> credit success at the end of the trajectory and can be distributed across steps during RL. When
the policy controls tool calls, the model can learn a gating rule that activates code only when it helps.</li>
</ul>
<h2 id="failure-cases-to-watch">Failure cases to watch<a hidden class="anchor" aria-hidden="true" href="#failure-cases-to-watch">#</a></h2>
<ul>
<li><strong>WebGPT</strong> can browse shallowly or game citations.</li>
<li><strong>ReTool</strong> can overuse tools or hit runtime and sandbox errors.<br>
Both add cost and latency compared with plain chain-of-thought. The choice should depend on the task and constraints.</li>
</ul>
<h2 id="acknowledgment">Acknowledgment<a hidden class="anchor" aria-hidden="true" href="#acknowledgment">#</a></h2>
<p>This post mirrors the content of my poster and the slide deck that I presented at the SUT Deep RL course poster session.
Figures and wording follow the poster so readers and viewers see the same story.</p>
<h2 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h2>
<p>[1] Nakano, R., et al. <strong>WebGPT: Browser-Assisted Question-Answering with Human Feedback</strong>. 2021.<br>
[2] Feng, J., et al. <strong>ReTool: Reinforcement Learning for Strategic Tool Use in LLMs</strong>. 2025.</p>
<blockquote>
<p>Notes<br>
Figures show reported numbers from the papers. The pipeline diagrams are schematic and not to scale.</p></blockquote>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/reinforcement-learning/">Reinforcement Learning</a></li>
      <li><a href="http://localhost:1313/tags/llm/">LLM</a></li>
      <li><a href="http://localhost:1313/tags/tool-use/">Tool Use</a></li>
      <li><a href="http://localhost:1313/tags/webgpt/">WebGPT</a></li>
      <li><a href="http://localhost:1313/tags/retool/">ReTool</a></li>
      <li><a href="http://localhost:1313/tags/rlhf/">RLHF</a></li>
      <li><a href="http://localhost:1313/tags/preference-model/">Preference Model</a></li>
      <li><a href="http://localhost:1313/tags/outcome-reward/">Outcome Reward</a></li>
      <li><a href="http://localhost:1313/tags/code-execution/">Code Execution</a></li>
      <li><a href="http://localhost:1313/tags/browsing/">Browsing</a></li>
      <li><a href="http://localhost:1313/tags/eli5/">ELI5</a></li>
      <li><a href="http://localhost:1313/tags/aime/">AIME</a></li>
      <li><a href="http://localhost:1313/tags/open-domain-qa/">Open-Domain QA</a></li>
      <li><a href="http://localhost:1313/tags/math/">Math</a></li>
    </ul>
  </footer>
</article>

<div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "rljclub-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">üß† RL Journal Club</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
